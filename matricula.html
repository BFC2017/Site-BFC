<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrícula Online - Brothers Fight Club</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <header>
        <nav>
            <a href="index.html"><span class="logo bfc-font">BFC</span></a>
            <ul>
                <li><a href="index.html#inicio">Início</a></li>
                <li><a href="index.html#sobre">Sobre</a></li>
                <li><a href="index.html#modalidades">Modalidades</a></li>
                <li><a href="index.html#equipe">Equipe</a></li>
                <li><a href="index.html#horarios">Horários</a></li>
                <li><a href="index.html#galeria">Galeria</a></li>
                <li><a href="timer.html">Timer</a></li>
                <li><a href="index.html#contato">Contato</a></li>
            </ul>
            <a href="agendamento.html" class="cta">Aula Experimental</a>
        </nav>
    </header>
    <main>
        <section>
            <h2>Matrícula Online</h2>
            <form class="formulario" id="matriculaForm">
                <div id="form-erro" class="erro-box" style="display:none;">
                    <span id="erro-close" class="erro-close">&times;</span>
                    <span id="erro-msg"></span>
                </div>
                <div class="campo-linha"><span class="obrigatorio-input">*</span><input type="text" name="nome" placeholder="Nome Completo" required></div>
                <div class="campo-linha"><span class="obrigatorio-input">*</span><input type="email" name="email" id="email-matricula" placeholder="E-mail" required></div>
                <div class="campo-linha"><span class="obrigatorio-input">*</span><input type="tel" name="telefone" id="telefone-matricula" placeholder="Telefone" required></div>
                <div class="campo-linha"><span class="obrigatorio-input">*</span><input type="number" name="idade" id="idade" placeholder="Idade" min="5" max="80" required></div>
                
                <!-- Campos para responsável (menores de 18 anos) -->
                <div id="campos-responsavel" style="display:none;">
                    <div class="campo-linha"><span class="obrigatorio-input">*</span><input type="text" name="nome_responsavel" id="nome_responsavel" placeholder="Nome do Responsável"></div>
                    <div class="campo-linha"><span class="obrigatorio-input">*</span><input type="tel" name="telefone_responsavel" id="telefone_responsavel" placeholder="Telefone do Responsável"></div>
                </div>
                
                <div class="campo-linha"><span class="obrigatorio-input">*</span>
                    <select name="modalidade" required>
                        <option value="">Escolha a modalidade</option>
                        <option value="Boxe">Boxe</option>
                        <option value="Jiujitsu">Jiujitsu</option>
                        <option value="Karate">Karate</option>
                        <option value="Kickboxing">Kickboxing</option>
                        <option value="Muaythai">Muaythai</option>
                    </select>
                </div>
                
                <div class="campo-linha"><span class="obrigatorio-input">*</span>
                    <select name="experiencia" required>
                        <option value="">Possui experiência prévia?</option>
                        <option value="Sim">Sim</option>
                        <option value="Não">Não</option>
                    </select>
                </div>
                <div class="campo-linha"><span class="obrigatorio-input">&nbsp;</span><textarea name="informacoes" placeholder="Informações Adicionais"></textarea></div>
                <button type="submit">Solicitar Matrícula</button>
            </form>
        </section>
    </main>
    <footer>
        <div class="footer-links">
            <a href="index.html#inicio">Início</a> |
            <a href="index.html#sobre">Sobre</a> |
            <a href="index.html#modalidades">Modalidades</a> |
            <a href="index.html#equipe">Equipe</a> |
            <a href="index.html#horarios">Horários</a> |
            <a href="index.html#galeria">Galeria</a> |
            <a href="index.html#contato">Contato</a>
        </div>
        <div class="footer-copy">© 2025 Brothers Fight Club (<span class="bfc-font">BFC</span>). Todos os direitos reservados.</div>
    </footer>
    <style>
        .campo-linha {
            display: flex;
            align-items: center;
            margin-bottom: 0.7rem;
        }
        .obrigatorio-input {
            color: #c00;
            font-size: 1.2em;
            width: 1.2em;
            min-width: 1.2em;
            text-align: left;
            margin-right: 0.5em;
            pointer-events: none;
            display: block;
        }
        .campo-linha input,
        .campo-linha textarea,
        .campo-linha select {
            flex: 1;
            display: block;
        }
        .erro-box {
            background: #fff0f0;
            color: #c00;
            border: 1px solid #c00;
            border-radius: 7px;
            padding: 0.8em 2.5em 0.8em 1.2em;
            margin-bottom: 1.1em;
            display: flex;
            align-items: center;
            gap: 0.7em;
            font-size: 1rem;
            position: relative;
        }
        .erro-close {
            position: absolute;
            top: 0.5em;
            right: 0.7em;
            font-size: 1.4em;
            font-weight: bold;
            color: #c00;
            cursor: pointer;
            user-select: none;
            line-height: 1;
            width: 1.2em;
            height: 1.2em;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }
        .erro-close:hover {
            background-color: rgba(204, 0, 0, 0.1);
        }
    </style>
    <script src="assets/js/main.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
      const telefoneInput = document.getElementById('telefone-matricula');
      const emailInput = document.getElementById('email-matricula');
      const idadeInput = document.getElementById('idade');
      const camposResponsavel = document.getElementById('campos-responsavel');
      const nomeResponsavelInput = document.getElementById('nome_responsavel');
      const telefoneResponsavelInput = document.getElementById('telefone_responsavel');
      const form = document.getElementById('matriculaForm');
      const erroBox = document.getElementById('form-erro');
      const erroMsg = document.getElementById('erro-msg');
      const erroClose = document.getElementById('erro-close');
      
      // Controle da caixa de erro
      erroClose.onclick = function() {
        erroBox.style.display = 'none';
      };
      
      // Controlar exibição dos campos de responsável baseado na idade
      idadeInput.addEventListener('input', function() {
        const idade = parseInt(this.value);
        if (idade < 18 && idade > 0) {
          camposResponsavel.style.display = 'block';
          nomeResponsavelInput.required = true;
          telefoneResponsavelInput.required = true;
        } else {
          camposResponsavel.style.display = 'none';
          nomeResponsavelInput.required = false;
          telefoneResponsavelInput.required = false;
          nomeResponsavelInput.value = '';
          telefoneResponsavelInput.value = '';
        }
        atualizarAsteriscos();
      });
      
      // Formatação do telefone principal
      telefoneInput.addEventListener('input', function(e) {
        formatarTelefone(e);
      });
      
      // Formatação do telefone do responsável
      telefoneResponsavelInput.addEventListener('input', function(e) {
        formatarTelefone(e);
      });
      
      // Função para formatação de telefone
      function formatarTelefone(e) {
        let value = e.target.value.replace(/\D/g, '');
        
        if (value.length <= 11) {
          if (value.length <= 2) {
            value = value.replace(/(\d{2})/, '($1');
          } else if (value.length <= 7) {
            value = value.replace(/(\d{2})(\d{1,5})/, '($1) $2');
          } else {
            value = value.replace(/(\d{2})(\d{5})(\d{1,4})/, '($1) $2-$3');
          }
        } else {
          value = value.slice(0, 11);
          value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
        }
        
        e.target.value = value;
      }
      
      // Função para atualizar asteriscos dos campos obrigatórios
      function atualizarAsteriscos() {
        const camposObrigatorios = [
          { input: form.nome, asterisco: document.querySelector('input[name="nome"]').parentElement.querySelector('.obrigatorio-input') },
          { input: form.email, asterisco: document.querySelector('input[name="email"]').parentElement.querySelector('.obrigatorio-input') },
          { input: form.telefone, asterisco: document.querySelector('input[name="telefone"]').parentElement.querySelector('.obrigatorio-input') },
          { input: form.idade, asterisco: document.querySelector('input[name="idade"]').parentElement.querySelector('.obrigatorio-input') },
          { input: form.modalidade, asterisco: document.querySelector('select[name="modalidade"]').parentElement.querySelector('.obrigatorio-input') },
          { input: form.experiencia, asterisco: document.querySelector('select[name="experiencia"]').parentElement.querySelector('.obrigatorio-input') }
        ];
        
        // Adicionar campos do responsável se menor de idade
        const idade = parseInt(idadeInput.value);
        if (idade < 18 && idade > 0) {
          camposObrigatorios.push(
            { input: nomeResponsavelInput, asterisco: document.querySelector('input[name="nome_responsavel"]').parentElement.querySelector('.obrigatorio-input') },
            { input: telefoneResponsavelInput, asterisco: document.querySelector('input[name="telefone_responsavel"]').parentElement.querySelector('.obrigatorio-input') }
          );
        }
        
        camposObrigatorios.forEach(campo => {
          if (campo.input && campo.asterisco) {
            if (campo.input.value.trim() !== '') {
              campo.asterisco.style.visibility = 'hidden';
            } else {
              campo.asterisco.style.visibility = 'visible';
            }
          }
        });
      }
      
      // Validação do email em tempo real
      emailInput.addEventListener('blur', function(e) {
        const email = e.target.value.trim();
        if (email && !isValidEmail(email)) {
          e.target.style.borderColor = '#c00';
          e.target.style.backgroundColor = '#fff5f5';
        } else {
          e.target.style.borderColor = '#ccc';
          e.target.style.backgroundColor = '';
        }
      });
      
      // Função para validar email
      function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
      }
      
      // Adicionar eventos para monitorar os campos obrigatórios
      [form.nome, form.email, form.telefone, form.idade, form.modalidade, form.experiencia].forEach(campo => {
        campo.addEventListener('input', atualizarAsteriscos);
        campo.addEventListener('change', atualizarAsteriscos);
      });
      
      // Adicionar eventos aos campos do responsável
      [nomeResponsavelInput, telefoneResponsavelInput].forEach(campo => {
        campo.addEventListener('input', atualizarAsteriscos);
        campo.addEventListener('change', atualizarAsteriscos);
      });
      
      // Submissão do formulário
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        erroBox.style.display = 'none';
        
        let faltando = [];
        const idade = parseInt(form.idade.value);
        
        const campos = {
          nome: form.nome.value.trim(),
          email: form.email.value.trim(),
          telefone: form.telefone.value.trim(),
          idade: form.idade.value.trim(),
          modalidade: form.modalidade.value.trim(),
          experiencia: form.experiencia.value.trim()
        };
        
        // Validação dos campos obrigatórios básicos
        if (!campos.nome) faltando.push('Nome Completo');
        if (!campos.email) faltando.push('E-mail');
        if (!campos.telefone) faltando.push('Telefone');
        if (!campos.idade) faltando.push('Idade');
        if (!campos.modalidade) faltando.push('Modalidade');
        if (!campos.experiencia) faltando.push('Experiência Prévia');
        
        // Validação dos campos do responsável se menor de idade
        if (idade < 18 && idade > 0) {
          const nomeResponsavel = nomeResponsavelInput.value.trim();
          const telefoneResponsavel = telefoneResponsavelInput.value.trim();
          
          if (!nomeResponsavel) faltando.push('Nome do Responsável');
          if (!telefoneResponsavel) faltando.push('Telefone do Responsável');
        }
        
        // Validação do email
        if (!isValidEmail(campos.email)) {
          erroMsg.innerHTML = 'Por favor, insira um <b>e-mail válido</b>';
          erroBox.style.display = 'flex';
          return;
        }
        
        if (faltando.length > 0) {
          erroMsg.innerHTML = 'Preencha os campos obrigatórios: <b>' + faltando.join(', ') + '</b>';
          erroBox.style.display = 'flex';
          return;
        }
        
        // Monta mensagem para o WhatsApp
        let msg = 'Olá!%0A%0ATudo bem?%0A%0AGostaria de solicitar uma matrícula!%0A%0ASeguem as informações:%0A%0A';
        msg += `*Nome Completo:*%0A${campos.nome}%0A%0A`;
        msg += `*E-mail:*%0A${campos.email}%0A%0A`;
        msg += `*Telefone:*%0A${campos.telefone}%0A%0A`;
        msg += `*Idade:*%0A${campos.idade} anos%0A%0A`;
        
        // Adicionar informações do responsável se menor de idade
        if (idade < 18) {
          msg += `*Nome do Responsável:*%0A${nomeResponsavelInput.value.trim()}%0A%0A`;
          msg += `*Telefone do Responsável:*%0A${telefoneResponsavelInput.value.trim()}%0A%0A`;
        }
        
        msg += `*Modalidade:*%0A${campos.modalidade}%0A%0A`;
        msg += `*Experiência Prévia:*%0A${campos.experiencia}%0A%0A`;
        
        if (form.informacoes.value.trim()) {
          msg += `*Informações Adicionais:*%0A${form.informacoes.value.trim()}`;
        } else {
          // Remove a última quebra de linha dupla se não há informações adicionais
          msg = msg.slice(0, -6);
        }
        
        window.open('https://wa.me/5562999284868?text=' + msg, '_blank');
      });
    });
    </script>
</body>
</html>
